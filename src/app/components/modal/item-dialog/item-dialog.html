<mat-card>
    <mat-card-header>
        @if(!isEdit()) {
        <mat-card-title>New item</mat-card-title>
        } @else {
        <mat-card-title>Update item</mat-card-title>
        }
        <mat-card-subtitle>Please fill in the details below:</mat-card-subtitle>
    </mat-card-header>
    <form [formGroup]="itemForm" (ngSubmit)="save()">
        <mat-card-content>
            <mat-form-field>
                <mat-label>Name</mat-label>
                <input matInput type="text" formControlName="name">
                @if (itemForm.get('name')?.invalid && itemForm.get('name')?.touched) {
                <mat-error>Name is required</mat-error>
                }
            </mat-form-field>
            <mat-form-field>
                <mat-label>Description</mat-label>
                <input matInput type="text" formControlName="description">
                @if (itemForm.get('description')?.invalid && itemForm.get('description')?.touched) {
                <mat-error>Description is required</mat-error>
                }
            </mat-form-field>
            <mat-form-field>
                <mat-label>Price</mat-label>
                <input matInput type="number" formControlName="price">
            </mat-form-field>
            <mat-form-field>
                <mat-label>Type</mat-label>
                <mat-select formControlName="typeId">
                    @for (type of itemTypes(); track type.id) {
                    <mat-option [value]="type.id">{{type.name}}</mat-option>
                    }
                </mat-select>
                @if (itemForm.get('typeId')?.invalid && itemForm.get('typeId')?.touched) {
                <mat-error>Type is required</mat-error>
                }
            </mat-form-field>
        </mat-card-content>
        <mat-card-actions>
            <button matButton="tonal" type="submit" [disabled]="itemForm.invalid || submitting()">
          <mat-icon>save</mat-icon>
          {{ submitting() ? (isEdit() ? 'Updating…' : 'Saving…') : (isEdit() ? 'Update' : 'Save') }}
        </button>
        <button matButton="outlined" type="button" (click)="reset()" [disabled]="submitting()"><mat-icon>delete</mat-icon>Reset</button>
        <div class="spacer"></div>
        <button matButton type="button" (click)="close()" [disabled]="submitting()"><mat-icon>close</mat-icon>Close</button>
        </mat-card-actions>
    </form>