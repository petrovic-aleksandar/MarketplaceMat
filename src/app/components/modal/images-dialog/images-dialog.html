<mat-card>
    <mat-card-header>
        <mat-card-title>Images</mat-card-title>
        <mat-card-subtitle>Manage item images</mat-card-subtitle>
    </mat-card-header>
    <mat-card-content>

        <mat-grid-list cols="4">
            @for (image of images; track $index) {
            <mat-grid-tile>
                <mat-grid-tile-header>
                    <button matButton="tonal">F</button>
                </mat-grid-tile-header>
                <img [src]="path(image)" class="img">
                <mat-grid-tile-footer>
                    <span>image</span>
                </mat-grid-tile-footer>
            </mat-grid-tile>
            }
        </mat-grid-list>

        <ul>
            @for (image of images; track $index) {
            <li>{{image}}</li>
            }
        </ul>

        {{item?.frontImage?.path}}
        <table mat-table [dataSource]="images">
            <tr mat-header-row *matHeaderRowDef="cols"></tr>
            <tr mat-row *matRowDef="let row; columns: cols;"></tr>
            <ng-container matColumnDef="path">
                <th mat-header-cell *matHeaderCellDef> Image </th>
                <td mat-cell *matCellDef="let image"> {{image}} </td>
            </ng-container>
            <ng-container matColumnDef="front">
                <th mat-header-cell *matHeaderCellDef> Front </th>
                <td mat-cell *matCellDef="let image"> {{item?.frontImage?.path === image}} </td>
            </ng-container>
            <ng-container matColumnDef="actions">
                <th mat-header-cell *matHeaderCellDef> Actions </th>
                <td mat-cell *matCellDef="let image"> buttons </td>
            </ng-container>
        </table>

        <input type="file" class="file-input" [accept]="requiredFileType" (change)="onFileSelected($event)" #fileUpload>

        <div class="file-upload">
            {{fileName || "No file uploaded yet."}}
            <button matButton="tonal" mat-mini-fab color="primary" class="upload-btn" (click)="fileUpload.click()">
                <mat-icon>attach_file</mat-icon>Choose file
            </button>
        </div>

        <div class="progress">
            @if (uploadProgress) {
            <mat-progress-bar class="progress-bar" mode="determinate" [value]="uploadProgress" />
            <mat-icon class="cancel-upload" (click)="cancelUpload()">delete_forever</mat-icon>
            }
        </div>

    </mat-card-content>
    <mat-card-actions>
        <div class="spacer"></div>
        <button mat-button (click)="close()"><mat-icon>close</mat-icon>Close</button>
    </mat-card-actions>
</mat-card>